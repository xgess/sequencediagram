// Bug Fixes Demo
// This example demonstrates the fixes for BUG-033 through BUG-040

title Bug Fixes Demonstration

// BUG-033: Actor/database label no longer overlaps icon
actor Customer
database OrdersDB
participant Server

// BUG-040: FontAwesome icons now render correctly
fontawesome6solid f007 UserIcon

// BUG-034: Message text is properly positioned (not too high)
Customer->Server: Place order request

// BUG-035 & BUG-036: Activate/deactivate align with messages
// The activation bar starts at "Place order" and ends at "Order confirmed"
activate Server #lightblue
note right of Server: Processing order
Server->OrdersDB: Save order
activate OrdersDB
OrdersDB-->Server: Order saved
deactivate OrdersDB
Server-->Customer: Order confirmed
deactivate Server

// BUG-037: Fragment headers don't overlap message text
alt Order Valid
  Customer->Server: Request status
  Server-->Customer: Status OK
else Order Invalid with a longer condition text here
  Customer->Server: Request status
  Server-->Customer: Error response
else Payment Pending
  Customer->Server: Check payment
  Server-->Customer: Awaiting payment
end

// BUG-038: Adjacent fragments have spacing between them
group First Group
  Customer->Server: Group 1 message
end

group Second Group
  Server->Customer: Group 2 message
end

loop Retry 3 times
  Customer->Server: Retry attempt
end

// BUG-039: Use Cmd+/ (Mac) or Ctrl+/ (Win/Linux) to toggle these comments
// Try selecting multiple lines and pressing Cmd+/ to uncomment them:
// Customer->Server: Uncomment me
// Server-->Customer: And me too

// All fixes working together
Customer->OrdersDB: Direct DB query
activate OrdersDB #lightyellow
note over OrdersDB: Query processing
OrdersDB-->Customer: Query result
deactivate OrdersDB
